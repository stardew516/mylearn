define(function(i,t,a){var n=i("jquery"),u={init:function(){i(["utils"],function(i){n(".select").initSelect(["id"]),n(".img-bigger").imgBig({width:500});var t=function(i,t,a,n){var u=i,e=Math.min(t-n,a);return u>e&&(u=e),{minNum:i,maxNum:e,startNum:0}},a=function(i,a){var e,r,d,m;if(a){var e=n(this).data("min"),r=n(this).data("max"),o=n(this).data("remain");""===o&&(o=r),d=n(this).data("alreadybuynum")||0,m=t(e,r,o,d)}var s=function(){u.calculationOfPrice()};return 0==i?void n(".plug-good-num").each(function(){var i=n(this).find("input").data("min"),a=n(this).find("input").data("max"),u=n(this).find("input").data("remain");""===u&&(u=a),d=n(this).find("input").data("alreadybuynum")||0,m=t(i,a,u,d),n.goodsnumbers.init(n(this),{initValue:0,maxValue:m.maxNum,minValue:m.minNum,startValue:m.startNum,valueChangedCallback:s})}):void 0},u={};u.calculationOfPrice=function(){var i=0,t=0,a=0;n(".good-number").each(function(){var u=parseInt(n(this).val());u>0&&(i+=u*Number(n(this).data("price")),t+=u*Number(n(this).data("listprice")),a+=u)}),n(".goods-total-price").text(i.toFixed(2)),n(".goods-save-price").text((t-i).toFixed(2))},a(0,null)})}};a.exports=u});