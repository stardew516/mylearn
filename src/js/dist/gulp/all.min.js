require.config({baseUrl:"../js/",paths:{css:"lib/css",style:"../css",jquery:"lib/jquery-2.1.4",mCustomScrollbar:"lib/jquery.mousewheel",util:"module/util",utils:"module/jquery.util"},shim:{util:["utils"]},urlArgs:"v="+(new Date).getTime()}),require(["jquery"],function(t){function e(){t("#router").val()in i&&require([i[t("#router").val()]],function(e){console.log(i[t("#router").val()],e),e.init()})}var i={util:"util",mine:"mine"};return e(),{init:e}}),define(["jquery","css!style/util.css"],function(t,e){var i="#fcf4f4",n=function(t,e){t.css({"background-color":e,border:"1px solid #d7d7d7"})},a={alert:function(t){alert(t)}};t(document).on("blur",".phone",function(){var e=t(this).val();if(e){var s=/^[1]\d{10}$/;s.test(e)?n(t(this),"white"):(n(t(this),i),a.alert("请输入正确的手机号码"))}}).on("input",".int",function(){var e=t(this).val();if(e){var i=/^\d*$/;i.test(e)?t(this).data("int",e):t(this).val(t(this).data("int"))}}).on("input",".number",function(){var e=t(this).val();if(e){var i=/^\d+[.]?\d*$/;i.test(e)?t(this).data("num",e):t(this).data("num")?t(this).val(t(this).data("num")):t(this).val("")}}).on("blur",".email",function(){var e=t(this).val();if(e){var s=/^\w+[~!#$%^&*()_+]*@\w+.\w+$/;s.test(e)?n(t(this),"white"):(n(t(this),i),a.alert("请输入有效的邮箱"))}}),t.fn.render=function(e){var i={fill:"~",content:""};t.extend(i,e)};var s=function(t){if(document.createEvent){var e=document.createEvent("MouseEvents");e.initMouseEvent("mousedown"),t[0].dispatchEvent(e)}else t.fireEvent&&t[0].fireEvent("onmousedown")};!function(t){t.fn.initSelect=function(e){t.each(t(this),function(i){var n=[],a=t.merge(n,e),l=t(this),u=l.width(),r=l.height(),o=l.find("option:selected").html();l.before('<div class="plug-select-outer clearfix"></div>'),l.prev(".plug-select-outer").html(l);var d='<div class="plug-in-select-outer">'+o+"</div>";l.after(d),l.next(".plug-in-select-outer").css({width:u-10,height:r,"line-height":r+"px"}).click(function(){s(l)}),l.on("change",function(){l.next(".plug-in-select-outer").data("value",l.val()),t.each(a,function(t){l.next(".plug-in-select-outer").data(a[t],l.find("option:selected").data(a[t]))}),l.next(".plug-in-select-outer").html(l.find("option:selected").html())})})},t.fn.imgBig=function(e){var i={width:300},n=t.extend(i,e);t(document).on("click",".img-bigger",function(){if(t(this).hasClass("on"))return!1;var e=t(this),i=e.position().top,a=e.position().left,s=e.width();t(".img-bigger").removeClass("on"),e.addClass("on"),t(".plug-big-img").remove();var l='<div class="plug-big-img"><img src="'+e.attr("src")+'"/></div>';t("body").append(l),t(".plug-big-img").css({top:i,left:a,width:s}).click(function(){t(this).animate({top:i,left:a,width:e.width(),"margin-top":0,"margin-left":0},600,function(){t(this).remove()}),e.removeClass("on")}).animate({top:"50%",left:"50%",width:n.width,"margin-top":-n.width/2,"margin-left":-n.width/2},600)})},t.goodsnumbers={init:function(e,i){var n={addBtnClass:"add",minusBtnClass:"minus",btnDisableClass:"gray",maxValue:999999,minValue:0,initValue:0,inputerClass:null,valueChangedCallback:null},a=t.extend({},n,i);return console.log(e,typeof e),e.each(function(){$this=t(this);var e=$this.find("."+a.minusBtnClass);e||console.error("cannot find minus button!");var i=$this.find("."+a.addBtnClass);i||console.error("cannot find add button!");var n="input"+(a.inputerClass?"."+a.inputerClass:"");$inputer=$this.find(n),$inputer||console.error("cannot find inputer !"),a.maxValue<a.minValue&&(a.minValue=a.maxValue),$this.get(0).opts=a,t.goodsnumbers.updateValue.call($this,a.initValue),$this.addClass("goodsnumbers"),$this.on("click","."+a.addBtnClass,t.goodsnumbers.addminusClicked),$this.on("click","."+a.minusBtnClass,t.goodsnumbers.addminusClicked),$this.on("input",n,t.goodsnumbers.valueInputed)})},addminusClicked:function(e){var i=t(this),n=0,a=i.closest(".goodsnumbers"),s=a.get(0).opts,l=t.goodsnumbers.getCurrentValue.call(a);if(i.hasClass(s.addBtnClass)){n=l+1;var u=t(this).prev(),r=u.prev();if(u.show(),r.css("display","inline-block"),u.val()<0&&u.val(0),n<s.minValue&&(n=s.minValue),t(this).hasClass(s.btnDisableClass))return!1}else if(i.hasClass(s.minusBtnClass)){n=l-1;var u=t(this).next();n<s.minValue&&(n=s.initValue)}t.goodsnumbers.updateValue.call(a,n),n>0?$inputer.addClass("onn"):$inputer.removeClass("onn")},valueInputed:function(e){var i=t(this),n=parseInt(i.val()),a=i.closest(".goodsnumbers"),s=a.get(0).opts,l=t.goodsnumbers.getCurrentValue.call(a);(0>n||isNaN(n))&&(n=0),n<s.minValue&&(n=n>l?s.minValue:0),n>0?i.addClass("onn"):i.removeClass("onn"),t.goodsnumbers.updateValue.call(a,n)},getCurrentValue:function(){var t=this,e=t.get(0).value;return e},updateValue:function(t){var e=this,i=e.get(0).opts;if(null!==t&&t!==$this.value){var n=e.find("."+i.minusBtnClass),a=e.find("."+i.addBtnClass);n.removeClass(i.btnDisableClass),a.removeClass(i.btnDisableClass),t>=i.maxValue?(t=i.maxValue,a.addClass(i.btnDisableClass)):t<i.minValue&&n.addClass(i.btnDisableClass),0==i.maxValue&&0==i.minValue&&(n.addClass(i.btnDisableClass),a.addClass(i.btnDisableClass)),e.get(0).prevValue=e.get(0).value,e.get(0).value=t,$inputer=e.find("input"+(i.inputerClass?"."+i.inputerClass:"")),$inputer.val(t),null!==e.get(0).prevValue&&i.valueChangedCallback&&i.valueChangedCallback.call(e.get(0),t)}}}}(jQuery)}),define(function(t,e,i){var n=t("jquery"),a={init:function(){t(["utils"],function(t){n(".select").initSelect(["id"]),n(".img-bigger").imgBig({width:500});var e=function(t,e,i,n){var a=t,s=Math.min(e-n,i);return a>s&&(a=s),{minNum:t,maxNum:s,startNum:0}},i=function(t,i){var s,l,u,r;if(i){var s=n(this).data("min"),l=n(this).data("max"),o=n(this).data("remain");""===o&&(o=l),u=n(this).data("alreadybuynum")||0,r=e(s,l,o,u)}var d=function(){a.calculationOfPrice()};return 0==t?void n(".plug-good-num").each(function(){var t=n(this).find("input").data("min"),i=n(this).find("input").data("max"),a=n(this).find("input").data("remain");""===a&&(a=i),u=n(this).find("input").data("alreadybuynum")||0,r=e(t,i,a,u),n.goodsnumbers.init(n(this),{initValue:0,maxValue:r.maxNum,minValue:r.minNum,startValue:r.startNum,valueChangedCallback:d})}):void 0},a={};a.calculationOfPrice=function(){var t=0,e=0,i=0;n(".good-number").each(function(){var a=parseInt(n(this).val());a>0&&(t+=a*Number(n(this).data("price")),e+=a*Number(n(this).data("listprice")),i+=a)}),n(".goods-total-price").text(t.toFixed(2)),n(".goods-save-price").text((e-t).toFixed(2))},i(0,null)})}};i.exports=a});