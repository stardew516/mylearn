/*! lib 2016-01-20 */
define(function(a,b,c){var d=a("jquery"),e={init:function(){a(["utils"],function(a){d(".select").initSelect(["id"]),d(".img-bigger").imgBig({width:500});var b=function(a,b,c,d){var e=a,f=Math.min(b-d,c);return e>f&&(e=f),{minNum:a,maxNum:f,startNum:0}},c=function(a,c){var f,g,h,i;if(c){var f=d(this).data("min"),g=d(this).data("max"),j=d(this).data("remain");""===j&&(j=g),h=d(this).data("alreadybuynum")||0,i=b(f,g,j,h)}var k=function(){e.calculationOfPrice()};return 0==a?void d(".plug-good-num").each(function(){var a=d(this).find("input").data("min"),c=d(this).find("input").data("max"),e=d(this).find("input").data("remain");""===e&&(e=c),h=d(this).find("input").data("alreadybuynum")||0,i=b(a,c,e,h),d.goodsnumbers.init(d(this),{initValue:0,maxValue:i.maxNum,minValue:i.minNum,startValue:i.startNum,valueChangedCallback:k})}):void 0},e={};e.calculationOfPrice=function(){var a=0,b=0,c=0;d(".good-number").each(function(){var e=parseInt(d(this).val());e>0&&(a+=e*Number(d(this).data("price")),b+=e*Number(d(this).data("listprice")),c+=e)}),d(".goods-total-price").text(a.toFixed(2)),d(".goods-save-price").text((b-a).toFixed(2))},c(0,null)})}};c.exports=e});